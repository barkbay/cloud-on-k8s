---
- job:
    description: Run ECK E2E tests on OpenShift
    name: cloud-on-k8s-e2e-tests-ocp
    project-type: pipeline
    parameters:
      - string:
          name: branch_specifier
          default: master
          description: "the Git branch specifier to build (&lt;branchName&gt;,&lt;tagName&gt;, &lt;commitId&gt;, etc.)"
      - string:
          name: JKS_PARAM_OPERATOR_IMAGE
          description: "ECK Docker image"
          default: "docker.elastic.co/eck-snapshots/eck-operator:1.7.0-SNAPSHOT-2021-05-31-b28ef329"
      - string:
          name: OCP_VERSION
          description: "OCP version to test. If left empty will be defaulted to one of the supported versions"
          default: "4.5.37"
      - bool:
          name: SEND_NOTIFICATIONS
          default: false
          description: "Specified if job should send notifications to Slack. Enabled by default."
    pipeline-scm:
      scm:
        - git:
            url: https://github.com/barkbay/cloud-on-k8s
            branches:
              - 'e2e/debug/ocp4-ci'
            credentials-id: 'f6c7695a-671e-4f4f-a331-acdce44ff9ba'
            refspec: 'e2e/debug/ocp4-ci'
      script-path: .ci/pipelines/e2e-tests-ocp.Jenkinsfile
      lightweight-checkout: false
